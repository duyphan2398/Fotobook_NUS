
<style type="text/css">
  .carded{
    border-top-left-radius: 9px;
    border-bottom-left-radius: 9px;
    background-color:#efe9e9;
    margin-bottom: 2px;z`
    transition: transform .2s;
    box-shadow: 5px 10px 8px #888888;
  }
  img{
    border-radius: 9px;
  }
  .btn-secondar{
    border :1px solid #3c5899 ;
    color:#3c5899;
  }
  .btn-secondar:hover{
    background-color:  #3c5899 ;
    color: white;
  }
  .btn-secondar:active {
    background-color:  white;
    color:#3c5899;
  }
  .carded:hover {
    transform: scale(0.95);
  }
  body{
    background-color: #d6bfbf24
  }
  .menu {
    color: #9e9191;
    transition: transform .2s;
  }
  .menu:hover {
    color: #3c5899;
    transform: scale(1.2);
  }
  .menu:active {
    color: #9e9191;
    transform: scale(1.05);
  }
  .page-link:hover{
    background-color:  #3c5899 ;
    color: white;
  }
  .page-link:active{
    background-color: white ;
    color:#3c5899;
  }
  .position-absolute{
    bottom:10px;

  }
  img.like{
    transition: transform .2s;

  }
  img.like:hover{
    transform: scale(1.1);
  }

  img.like:active{
    transform: scale(0.5);
  }
  .tabcontent {
    display: none;
  }
  .fancy {
    line-height: 1;
    text-align: center;
  }
  .fancy span {
    display: inline-block;
    position: relative;
  }
  .fancy span:before,
  .fancy span:after {
    content: "";
    position: absolute;
    height: 5px;
    border-bottom: 1px solid white;
    border-top: 1px solid white;
    top: 0;
    width: 600px;
  }
  .fancy span:before {
    right: 100%;
    margin-right: 15px;
  }
  .fancy span:after {
    left: 100%;
    margin-left: 15px;
  }
  .following {
    background-image: linear-gradient(to bottom, #eb7c05, #e0c516);
    border-radius: 60px;
    font-family: Courier New;
    color: #ffffff;font-size: 14px;
    padding-top:  3px;
    padding-bottom: 3px;
    padding-right: 8px;
    padding-left: 8px;
    transition: transform .2s;
  }
  .following:hover {
    transform: scale(1.2);
  }
  .follower {
    background-image: linear-gradient(to bottom, #eaeaea52, #f7d603);
    border-radius: 60px;
    font-family: Courier New;
    color: #000000;font-size: 15px;
    padding-top:  3px;
    padding-bottom: 3px;
    padding-right: 15px;
    padding-left: 15px;
    transition: transform .2s;
  }
  .follower:hover {
    transform: scale(1.2);
  }
  img.album{
    position:absolute;
    border :1px solid white;
    height:140px;
    width:140px;
    margin-top: 20px;
    margin-left:20px;
  }
  img.photo{
    border :2px solid white;
    height: 276px;
    width: 250px;
    margin-left:0;
  }
  img.modalAlbumImg{
    width: 100%;
    height:500px;
    border-radius:10px;
  }
  img.modalPhoto{
    width: 100%;
    height:500px;
    border-radius:10px;
  }
  @media only screen and (max-width: 990px) {
    img.album{
      position:absolute;
      border :1px solid white;
      height: 140px;
      width:140px;
      margin-left:25px;
      margin-top: 30px;
      bottom: 60px;
      top:35px;
    }
  }
</style>
</head>


<script type="text/javascript">
  $(document).ready(function(){
    openTab(event, 'PHOTO');
  })
</script>

<header>
  <div class="container">
    <div class="row">
      <div class="col-sm-5 col-md-7">
        <div class="container">
          <div class="row">
            <div class="col-sm-3 col-lg-3">
              <a class="navbar-brand text-white   mr-2 header float-right" style="height:45px;" href="<%= root_path %>"><b>Fotobook</b></a>
            </div>
            <div class="col-sm-9 col-lg-9">
              <input class="form-control mt-1 h-75" type="search" placeholder="Search Photo/Album" aria-label="Search">
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-5 col-md-5">
        <ul class="nav nav-pills float-right">
          <%  if !current_user.nil? %>
          <li class="nav-item">
            <div class="d-flex  align-items-center header" style="height:45px;">
              <img src="<%=current_user.avatar.url(:thumb) %>" class="rounded-circle mr-1" style=" width: 37px; height: 37px">
              <a class="nav-link text-white p-1 mr-md-3 "style="font-size: 14px" href="/userProfile"><b> <%=current_user.first_name.to_s%></b></a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white header pt-2" style="height:45px;   font-size: 17px" data-method="DELETE" href="<%= destroy_user_session_path %>"><b>Log out</b> </a>
          </li>
          <%   else  %>
          <li class="nav-item">
            <div class="d-flex  align-items-center header" style="height:45px;">
            </div>
          </li>

          <li class="nav-item">
            <a class="nav-link text-white header pt-2" style="height:45px;   font-size: 17px" href="/signin"><b>Log In</b></a>
          </li>

          <li class="nav-item">
            <a class="nav-link text-white header pt-2" datastyle="height:45px;   font-size: 17px" data-method="GET" href="<%= new_user_registration_path %>"><b>Sign Up</b></a>
          </li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
</header>
<br class="m-2">
<!-- MAIN -->
<main>
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-3 col-lg-2">
        <ul class="nav flex-column ml-sm-5">
          <li class="nav-item">
            <a onclick="openTab(event, 'PHOTO')"class="nav-link menu"  href="/feed"><b>Feeds</b></a>
          </li>
          <li class="nav-item">
            <a class="nav-link menu" href="<%= root_path %>"><b>Discover</b></a>
          </li>
        </ul>
      </div>
      <!-- Feed and Disco -->
      <div class="col-sm-8 col-lg-9" style="background-color: white">
        <div class="container">
          <div class="row">
            <div class="mx-auto p-3">
              <div class="btn-group" role="group">
                <button type="button" class="btn btn-secondar tablinks"  onclick="openTab(event, 'PHOTO')"><b>PHOTO</b></button>
                <button type="button" class="btn btn-secondar tablinks" onclick="openTab(event, 'ALBUM')"><b>ALBUM</b></button>
              </div>
            </div>
          </div>
          <!-- Modal Album -->
          <div class="modal fade" id="modalAlbum">
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                  <h4><b class="modal-title-album"></b></h4>
                  <button type="button" class="close" data-dismiss="modal">×</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                  <div id="showAlbum" class="carousel slide" data-ride="carousel">
                    <!-- The slideshow -->
                    <div class="carousel-inner modalAlbum">
                      <!-- CODE IMAGES OF ALBUM <here> -->
                      </div>
                      <!-- Left and right controls -->
                      <a class="carousel-control-prev" href="#showAlbum" data-slide="prev">
                        <span class="carousel-control-prev-icon"></span>
                      </a>
                      <a class="carousel-control-next" href="#showAlbum" data-slide="next">
                        <span class="carousel-control-next-icon"></span>
                      </a>
                    </div>
                  </div>
                  <!-- Modal footer -->
                  <div class="modal-content p-2">
                    <p class="modal-content-album"></p>
                  </div>
                </div>
              </div>
            </div>
            <!-- Modal Photo -->
            <div class="modal fade" id="myModal" role="dialog">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <h4 class="modal-title"></h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body" style="overflow:hidden; text-align: center;">
                    <img class="img-responsive modalPhoto" src="" />
                  </div>
                  <div class="modal-content p-2">
                    <p class="modal-content-photo"></p>
                  </div>

                </div>
              </div>
            </div>
            <!-- CÁC CARD PHOTO-->
            <div id="PHOTO" class="tabcontent">
              <div  class="row ">
                <!-- ------------------------------------------ -->
                <!-- CÁC CARD PHOTO-->
                <% if @photos %>
                <% @photos.each do |photo| %>
                <% if !photo.sharing_mode == false %>
                <div class="   col-12 col-lg-6  mb-4     p-0 h-75 float-left" style="border-left: 20px solid white">
                  <div class=" carded" style="width:95%">
                    <div class="d-flex container-fluid" >
                      <div class="row">
                        <div class="col-4 p-0" >
                          <img name="photo<%=photo.id%>" data-toggle  ="modal" data-target="#myModal" class="show-modal-photo" style="width:110%;height: 330px;overflow:hidden;" src="<%=photo.image.url%>">
                        </div>
                        <div class="col-8">

                          <div class="mt-2 ml-4 position-relative">
                            <div class="d-flex align-items-center">
                              <!-- Avatar -->
                              <img src="<%=photo.user.avatar.url(:thumb) %>" class="rounded-circle mr-1" style=" width: 37px; height: 37px">

                              <!-- Name  -->
                              <% if !current_user %>
                              <a class=" text-dark ml-2 mr-5"style="font-size: 14px" href="./profile/<%=photo.user.id%>"><b><%= photo.user.first_name%> <%= photo.user.last_name%></b></a>
                              <% elsif current_user != photo.user %>
                              <a class=" text-dark ml-2 mr-5"style="font-size: 14px" href="./profile/<%=photo.user.id%>"><b><%= photo.user.first_name%> <%= photo.user.last_name%></b></a>
                              <%else%>
                              <a class=" text-dark ml-2 mr-5"style="font-size: 14px" href="./userProfile"><b><%= photo.user.first_name%> <%= photo.user.last_name%></b></a>
                              <%end%>




                              <% if current_user && current_user != photo.user %>
                              <% if current_user.followings.include?(photo.user) %>

                              <button
                              name="button<%=photo.user_id%>"
                              type="submit"
                              class="follow following ml-2"
                              following_id="<%=photo.user_id%>"
                              follower_id="<%=current_user.id%>"
                              followed="true">
                              Unfollow
                            </button>

                            <%else%>
                            <button
                            name="button<%=photo.user_id%>"
                            type="submit"
                            class="follow follower ml-2"
                            following_id="<%=photo.user_id%>"
                            follower_id="<%=current_user.id%>"
                            followed="false">
                            Follow
                          </button>
                          <%end%>
                          <% end%>

                        </div>
                        <div class="card-body mt-3" style="height: 150px;
                        overflow-y:auto;">
                        <!-- title -->
                        <h6 class="card-title"><b name="photo<%=photo.id%>"><%= photo.title %></b></h6>
                        <!-- Discription -->
                        <p name="photo<%=photo.id%>"class="card-text"><%= photo.description%></p>
                      </div>


                      <div class="mt-5">
                        <div class="display-block float-left">
                          <% if current_user %>
                          <% if (current_user.voted_down_on? photo) || (!ActsAsVotable::Vote.where(voter_id: current_user,votable_id: photo.id).present?) %>
                          <%= link_to like_photo_path(photo),name: "photos#{photo.id}", class: "likes float-left" ,flag: "1", method: :post, remote: true do %>
                          <img  class="like" src="./assets/heart.png">
                          <% end %>
                          <% else %>
                          <%= link_to like_photo_path(photo),name: "photos#{photo.id}", class: "likes" ,method: :post,flag: "0", remote: true do %>
                          <img class="like  " src="./assets/like.png">
                          <% end %>
                          <% end %>
                          <%else%>
                          <p class=" float-left mt-2">Like(s): </p>
                          <% end %>
                        </div>


                        <p name="photos<%=photo.id%>"class=" float-left mt-2  ml-2">  <%= photo.get_upvotes.size %></p>
                        <p class=" mt-2 p-1 float-right date"><%= photo.updated_at.strftime("%d-%m-%Y - %I:%M%P")%></p>
                      </div>

                      <!-- at  -->

                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
          <% end %>
          <% end %>
          <% end %>


          <!-- ------------------------------------------ -->





          <!-- PHÂN TRANG PHOTO  -->
        </div>
        <div class="row">
          <nav class="mx-auto p-3">
            <p class="subtitle fancy"><span><i>Pics With Love</i></span></p>
            <ul class="pagination">
              <li class="page-item">
                <a class="page-link" href="#" tabindex="-1">Previous</a>
              </li>
              <li class="page-item"><a class="page-link" href="#">1</a></li>
              <li class="page-item"><a class="page-link" href="#">2</a></li>
              <li class="page-item"><a class="page-link" href="#">3</a></li>
              <li class="page-item">
                <a class="page-link" href="#">Next</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
      <!-- ------------------------------------------ -->
      <!-- CÁC CARD ALBUM -->
      <div id="ALBUM" class="tabcontent">
        <div  class="mt-4 row ">
          <!------------------------------------------------->
                  <!-- <div class=" mb-4 col-12 col-lg-6  p-0 h-75 float-left">
                    <div class="carded" style="width:95%">
                    <div class="container">
                      <div class="row">

                        <div class="col-4 col-lg-4">
                          <div data-toggle="modal" data-target="#modalAlbum" class="">

                              <img class="album mr-2 " src="./assets/1.jpg" alt="Card image cap">
                              <img class="mr-2 album" src="./assets/2.jpg" alt="Card image cap">
                              <img class="mr-2 album" src="./assets/3.jpg" alt="Card image cap">
                              <img class="mr-2 album" src="./assets/1.jpg" alt="Card image cap">
                            </div>
                        </div>
                        <div class="col-1 col-lg-2"></div>
                        <div class="col-7 col-lg-6">
                          <div class="m-2 position-relative">
                            <div class="d-flex align-items-center">
                                <img src="https://picsum.photos/35/35" class="rounded-circle" >
                                <a class=" text-dark ml-2"style="font-size: 14px" href="#"><b>Duy Phan</b></a>
                            </div>
                            <div class="card-body mt-1">
                                <h5 class="card-title">Card title</h5>
                                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            </div>
                            <div class="">
                              <div class="float-left">
                                  <img class="like" src="./assets/heart.png">
                              </div>
                              <div class=" p-2 float-right date">Set date bằng JS</div>
                            </div>
                            </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div> -->
                <!-- ----------------------------- -->
                <% if @albums %>
                <% @albums.each do |album| %>
                <% if !album.sharing_mode == false %>
                <div class=" mb-4 col-12 col-lg-6  p-0 h-75 float-left">
                  <div class="carded" style="width:95%; height: 279px">
                    <div class="container">
                      <div class="row">
                        <div class="col-4 col-lg-4">
                          <div name="album<%=album.id%>"  style="align-content: center;" data-toggle="modal" data-target="#modalAlbum" class="show-modal-album mx-auto mt-5">
                            <% if album.pics.any? && album.pics.size != 0 %>
                            <% album.pics.each do |pic| %>
                            <%= image_tag pic.image.url(:medium),class: " album mr-2", name: "album"+album.id.to_s%>
                            <% end %>
                            <% end %>
                          </div>
                        </div>

                        <div class="col-8 col-lg-8  ">

                          <div class="mt-2 ml-3 position-relative">
                            <div class="d-flex align-items-center">
                              <img src="<%=album.user.avatar.url(:thumb) %>" class="rounded-circle mr-1" style=" width: 37px; height: 37px">
                              <a class=" text-dark ml-2 mr-5"style="font-size: 14px" href="./profile/<%=album.user.id%>"><b><%= album.user.first_name%> <%= album.user.last_name%> </b></a>
                              <!--   <button class=""style="background-image:linear-gradient(to bottom, #ffffff, #f9f84e);border-radius: 60px;font-family: Courier New;color: #0a0202;font-size: 14px;padding-top: 3px;padding-bottom: 3px;padding-right: 5px;padding-left: 5px;margin-left: 95px;">follower</button> -->
                              <% if current_user && current_user != album.user%>
                              <% if current_user.followings.include?(album.user) %>

                              <button
                              name="button<%=album.user_id%>"
                              type="submit"
                              class="follow following ml-4"
                              following_id="<%=album.user_id%>"
                              follower_id="<%=current_user.id%>"
                              followed="true">
                              Unfollow
                            </button>

                            <%else%>
                            <button
                            name="button<%=album.user_id%>"
                            type="submit"
                            class="follow follower ml-4"
                            following_id="<%=album.user_id%>"
                            follower_id="<%=current_user.id%>"
                            followed="false">
                            Follow
                          </button>
                          <%end%>
                          <%end%>
                        </div>
                        <div class="card-body mt-1" style="height: 150px;
                        overflow-y:auto;">
                        <h6 class="card-title"><b name="album<%=album.id%>"><%= album.title %></b></h6>
                        <!-- Discription -->
                        <p name="album<%=album.id%>" class="card-text"><%= album.description%></p>
                      </div>
                      <div class=" mt-3">
                        <!-- <p class=" float-left">
                          <img class="like" src="./assets/heart.png">
                        </p> -->

                       <div class="mt-2">
                        <div class="display-block float-left">
                          <% if current_user %>
                          <% if (current_user.voted_down_on? album) || (!ActsAsVotable::Vote.where(voter_id: current_user,votable_id: album.id).present?) %>
                          <%= link_to like_album_path(album),name: "albums#{album.id}", class: "likes float-left" ,flag: "1", method: :post, remote: true do %>
                          <img  class="like" src="./assets/heart.png">
                          <% end %>
                          <% else %>
                          <%= link_to like_album_path(album),name: "albums#{album.id}", class: "likes" ,method: :post,flag: "0", remote: true do %>
                          <img class="like  " src="./assets/like.png">
                          <% end %>
                          <% end %>
                          <%else%>
                          <p class=" float-left mt-2">Like(s): </p>
                          <% end %>
                        </div>


                        <p name="albums<%=album.id%>"class=" float-left mt-2  ml-2">  <%= album.get_upvotes.size %></p>
                        <p class=" mt-1 p-1 float-right date"><%= album.updated_at.strftime("%d-%m-%Y - %I:%M%P")%></p>
                      </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <% end %>
          <% end %>
          <% end %>
          <!-- ------------------------------- -->
        </div>
        <!-- PHÂN TRANG ALBUM -->
        <div class="row">
          <nav class="mx-auto p-3">
            <p class="subtitle fancy"><span><i>Pics With Love</i></span></p>
            <ul class="pagination">
              <li class="page-item">
                <a class="page-link" href="#" tabindex="-1">Previous</a>
              </li>
              <li class="page-item"><a class="page-link" href="#">1</a></li>
              <li class="page-item"><a class="page-link" href="#">2</a></li>
              <li class="page-item"><a class="page-link" href="#">3</a></li>
              <li class="page-item">
                <a class="page-link" href="#">Next</a>
              </li>
            </ul>
          </nav>
        </div>
        <!-- ----------------------------- -->
      </div>
    </div>
  </div>
  <!-- End FEED AND -->
</div>
</div>
</main>


